<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en" th:fragment="layout(content)" role="document">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <meta name="description" content="Funky Hostel Hub ‚Äì browse, view and manage hostels easily."/>
    <meta name="theme-color" content="#6c5ce7"/>
    <meta name="apple-mobile-web-app-capable" content="yes"/>
    <meta name="apple-mobile-web-app-status-bar-style" content="default"/>
    <meta property="og:title" content="Funky Hostel Hub"/>
    <meta property="og:description" content="Browse hostels, check availability, and manage listings."/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="/"/>
    <meta property="og:image" content="/icons/social-share.png"/>
    <meta name="twitter:card" content="summary_large_image"/>
    <meta name="twitter:title" content="Funky Hostel Hub"/>
    <meta name="twitter:description" content="Browse hostels, check availability, and manage listings."/>
    <meta name="twitter:image" content="/icons/social-share.png"/>
    <title>Funky Hostel Hub</title>
    <link rel="stylesheet" th:href="@{/css/style.css}"/>
    <link rel="icon" type="image/svg+xml" href="/images/hostel.svg"/>
    <script>
        (function () {
            const root = document.documentElement;
            const themeMeta = document.querySelector('meta[name="theme-color"]');

            function applyThemeColor(current) {
                const color = current === 'dark' ? '#1a1d24' : '#6c5ce7';
                if (themeMeta) themeMeta.setAttribute('content', color);
            }

            const stored = localStorage.getItem('theme');
            if (stored) {
                root.setAttribute('data-theme', stored);
                applyThemeColor(stored);
            }

            function toggleTheme() {
                const current = root.getAttribute('data-theme') === 'dark' ? 'light' : 'dark';
                root.setAttribute('data-theme', current);
                localStorage.setItem('theme', current);
                applyThemeColor(current);
            }

            window.__toggleTheme = toggleTheme;

            function markActiveLinks() {
                const path = location.pathname.replace(/\/$/, ''); // trim trailing slash
                document.querySelectorAll('.footer .actions a').forEach(a => {
                    try {
                        const href = new URL(a.getAttribute('href'), location.origin).pathname.replace(/\/$/, '');
                        if (href === path) {
                            a.classList.add('active');
                        } else {
                            a.classList.remove('active');
                        }
                    } catch (_) {
                    }
                });
            }

            window.addEventListener('DOMContentLoaded', markActiveLinks);
        })();
    </script>
</head>
<body>
<div class="header" role="banner">
    <div class="container header-bar">
        <nav class="header-nav" role="navigation"><!-- nav removed --></nav>
        <h1>Funky Hostel Hub</h1>
        <div class="header-actions"><!-- actions kept empty --></div>
    </div>
</div>

<main class="container" role="main">
    <th:block th:insert="${content}"/>
</main>

<div class="footer" role="contentinfo">
    <div class="container">
        <div class="footer-content">
            <span>
                &copy; <span th:text="${#temporals.createNow().getYear()}">2026</span>
                Funky Hostel Hub ‚Äî belong to Shashi's Sons
                <span class="blink" aria-hidden="true">üòé</span>
                <span aria-label="smile">:)</span>
            </span>
            <div class="actions">
                <a class="btn" th:href="@{/}">Home</a>
                <a class="btn" th:href="@{/hostels}">Hostels</a>
            </div>
        </div>
    </div>
</div>

<button class="btn theme-toggle-fab" type="button" onclick="window.__toggleTheme()" aria-label="Toggle theme">üåì Toggle
</button>

<button class="chatbot-fab" type="button" id="chatbotToggle" aria-label="Open chat">
    <!-- SVG chat icon -->
    <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
         stroke-linecap="round" stroke-linejoin="round" style="vertical-align:middle;">
        <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
    </svg>
</button>
<div class="chatbot-modal" id="chatbotModal" style="display:none;">
    <div class="chatbot-header">
        <span>ChatBot</span>
        <button class="chatbot-close" type="button" aria-label="Close chat" id="chatbotClose">&times;</button>
    </div>
    <div class="chatbot-body" id="chatbotBody">
        <div class="chatbot-message chatbot-message-bot">Hi! How can I help you?</div>
    </div>
    <form class="chatbot-form" id="chatbotForm" autocomplete="off">
        <label for="chatbotInput"></label><input type="text" id="chatbotInput" placeholder="Type your message..."
                                                 autocomplete="off"/>
        <button type="submit" aria-label="Send">Send</button>
    </form>
</div>
<script>
    (function () {
        const fab = document.getElementById('chatbotToggle');
        const modal = document.getElementById('chatbotModal');
        const close = document.getElementById('chatbotClose');
        const form = document.getElementById('chatbotForm');
        const input = document.getElementById('chatbotInput');
        const body = document.getElementById('chatbotBody');
        fab.addEventListener('click', () => {
            modal.style.display = 'block';
            input.focus();
        });
        close.addEventListener('click', () => {
            modal.style.display = 'none';
        });
        form.addEventListener('submit', function (e) {
            e.preventDefault();
            const msg = input.value.trim();
            if (!msg) return;
            const userMsg = document.createElement('div');
            userMsg.className = 'chatbot-message chatbot-message-user';
            userMsg.textContent = msg;
            body.appendChild(userMsg);
            input.value = '';
            // Simulate bot reply
            setTimeout(() => {
                const botMsg = document.createElement('div');
                botMsg.className = 'chatbot-message chatbot-message-bot';
                botMsg.textContent = 'Oops ‚Äî on a coffee break. Beep me later with snacks. ‚òïüç™';
                body.appendChild(botMsg);
                body.scrollTop = body.scrollHeight;
            }, 600);
            body.scrollTop = body.scrollHeight;
        });
    })();
</script>

</body>
</html>

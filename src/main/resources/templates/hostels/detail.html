<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" th:replace="~{layout :: layout(~{::content})}">
<section th:fragment="content">
    <div class="card">
        <h2 th:text="${hostel != null ? hostel.name : 'Not found'}">Hostel</h2>
        <div th:if="${hostel == null}"><p>Hostel not found.</p></div>
        <div th:if="${hostel != null}">
            <div class="form-row">
                <p style="flex:1"><strong>Address:</strong> <span th:text="${hostel.address}"></span></p>
                <p style="flex:1"><strong>Capacity:</strong> <span th:text="${hostel.capacity}"></span></p>
            </div>
            <div class="form-row">
                <p style="flex:1"><strong>Price per night:</strong>
                    <span th:text="${'â‚¬ ' + #numbers.formatDecimal(hostel.pricePerNight,1,2)}"></span>
                </p>
                <p style="flex:1"><strong>Status:</strong> <span
                        th:text="${hostel.available ? 'Available' : 'Unavailable'}"></span></p>
            </div>
            <form th:action="@{|/hostels/${hostel.id}/delete|}" method="post" class="actions" style="margin-top:1rem">
                <button class="btn" style="background:#c0392b">Delete</button>
                <a class="btn" th:href="@{/hostels}" style="background:#6c757d">Back</a>
            </form>
        </div>
    </div>

    <div class="card">
        <h3>Booked Rooms</h3>
        <div class="actions" style="margin-bottom:.5rem">
            <a class="btn" th:href="@{/allocations/create}">Allocate a Room</a>
            <span class="muted" th:if="${allocations != null}" th:text="${'Total bookings: ' + allocations.size()}">Total bookings: 0</span>
        </div>
        <div class="table-wrap" th:if="${allocations != null && !#lists.isEmpty(allocations)}">
            <table class="table">
                <thead>
                <tr>
                    <th>Room</th>
                    <th>Guest</th>
                    <th>Check In</th>
                    <th>Check Out</th>
                    <th>Beds</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="a : ${allocations}">
                    <td th:text="${a.hostelRoomNumber}">Room</td>
                    <td th:text="${a.fullName}">Guest</td>
                    <td th:text="${#temporals.format(a.checkIn, 'yyyy-MM-dd HH:mm')}">Check In</td>
                    <td th:text="${#temporals.format(a.checkOut, 'yyyy-MM-dd HH:mm')}">Check Out</td>
                    <td th:text="${a.numberOfBed}">Beds</td>
                </tr>
                </tbody>
            </table>
        </div>
        <div th:if="${allocations == null || #lists.isEmpty(allocations)}" class="muted">
            No bookings yet for this hostel.
        </div>
    </div>
</section>
</html>

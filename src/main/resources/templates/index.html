<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" th:replace="~{layout :: layout(~{::content})}">
<section th:fragment="content">
    <div class="card">
        <h2>Welcome</h2>
        <p>
            <a class="btn" th:href="@{/api/v1/hostels}">Browse Hostels</a>
            <a class="btn" th:href="@{/api/v1/hostels/create}">Add Hostel</a>
            <a class="btn" th:href="@{/api/v1/allocations}">Manage Allocations</a>
            <a class="btn" th:href="@{/api/v1/rooms}">Browse Rooms</a>
            <a class="btn" th:href="@{/api/v1/rooms/create}">Add Room</a>
            <a class="btn" th:href="@{/api/v1/reviews}">View Reviews</a>
            <!-- Guest portal entry -->
            <a class="btn" th:if="${guestSession} == null or ${guestSession.email} == null" th:href="@{/api/v1/guest/login}">Guest Login</a>
            <span th:if="${guestSession} != null and ${guestSession.email} != null">
                <a class="btn" th:href="@{/api/v1/guest/my-rooms}">My Rooms</a>
                <a class="btn" th:href="@{/api/v1/guest/my-reviews}">My Reviews</a>
            </span>
        </p>
    </div>
    <!-- Guest quick tips/prompt -->
    <div class="toast info" th:if="${guestSession} == null or ${guestSession.email} == null" style="margin-top:.75rem">
        <span class="toast-content">
            <span class="toast-icon" aria-hidden="true">ℹ️</span>
            <span>Log in via the Guest portal to access your rooms and write reviews.</span>
            <a class="btn" style="margin-left:.5rem" th:href="@{/api/v1/guest/login}">Guest Login</a>
        </span>
    </div>
    <div class="review-footer">
        <h3>What our guests are saying...</h3>
        <div class="review-tiles">
            <div class="review-tile" th:each="review : ${reviews}">
                <div class="review-text" th:text="'“' + ${review.text} + '”'"></div>
                <div class="review-author" th:text="'— ' + ${review.author}"></div>
                <div class="rating-stars readonly" th:if="${review.rating != null}" th:with="r=${review.rating}">
                    <span th:each="i : ${#numbers.sequence(1,5)}"
                          th:classappend="${i <= r} ? 'filled' : 'empty'"
                          th:text="${i <= r} ? '★' : '☆'">★</span>
                </div>
                <div class="review-date" th:text="${#temporals.format(review.created, 'dd-MM-yyyy HH:mm')}"></div>
            </div>
        </div>
    </div>
</section>
</html>

<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" th:replace="~{layout :: layout(~{::content})}">
<section th:fragment="content">
    <div class="card">
        <h2>Allocations</h2>
        <div th:if="${success}"
             style="margin:.5rem 0; padding:.6rem .8rem; background:#e6ffed; color:#1e7e34; border:1px solid #ccebd6; border-radius:8px;">
            <span th:text="${success}">Success</span>
        </div>
        <div class="actions" style="margin-bottom:.5rem">
            <a class="btn" th:href="@{/api/v1/allocations/create}">New Allocation</a>
        </div>
        <div class="table-wrap">
            <table class="table">
                <thead>
                <tr>
                    <th>Name</th>
                    <th>Email</th>
                    <th>Hostel</th>
                    <th>Room</th>
                    <th>Check In</th>
                    <th>Check Out</th>
                    <th>Payment</th>
                    <th class="sticky-right">Actions</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="a : ${allocations}">
                    <td th:text="${a.fullName}">Name</td>
                    <td th:text="${a.email}">Email</td>
                    <td th:text="${a.hostelName}">Hostel</td>
                    <td th:text="${a.hostelRoomNumber}">Room</td>
                    <td th:text="${#temporals.format(a.checkIn, 'dd-MM-yyyy HH:mm')}">Check In</td>
                    <td th:text="${#temporals.format(a.checkOut, 'dd-MM-yyyy HH:mm')}">Check Out</td>
                    <td th:text="${a.paymentMethod}">Payment</td>
                    <td class="sticky-right">
                        <form th:action="@{'/api/v1/allocations/' + ${a.id} + '/delete'}" method="post"
                              class="confirm-delete"
                              data-confirm="Delete this booking?">
                            <input type="hidden" name="hostelId" th:value="${a.hostelId}"/>
                            <button type="submit" class="btn danger">Delete</button>
                        </form>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</section>
</html>
